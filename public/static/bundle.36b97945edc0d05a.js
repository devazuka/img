var app;(()=>{"use strict";var e,t,r,n,i,o,a,s,l,c,u={937:(e,t,r)=>{r.d(t,{_:()=>l});var n=r(172),i=r(994),o=r(748),a=r.n(o),s=r(201);class l extends n.Component{refPickFiles=(()=>(0,n.createRef)())();onFiles=(e,t)=>{const r=Array.from(e||[]),n=[];for(const e of r)e.type.startsWith("image/")?n.push(e):this.props.printer.warn(`Unsupported non-image item ${t}: ${e.name} - ${e.type}`);n.length?this.props.triggerUploads(n,t):this.props.printer.warn(`No images ${t}, nothing to upload.`)};onDrop=e=>{e.preventDefault(),this.onFiles(e.dataTransfer?.files,"dropped")};onFilePicker=()=>{this.onFiles(this.refPickFiles.current?.files,"picked");const e=this.refPickFiles.current;e&&(e.value="")};onPasteDocument=e=>{"INPUT"!==document.activeElement?.tagName&&(e.preventDefault(),this.onFiles(e.clipboardData?.files,"pasted"))};onPasteButtonClick=async()=>{try{const e=[],t=await navigator.clipboard.read();for(const r of t){const t=r.types.filter((e=>e.startsWith("image/")));if(!t.length){const e=r.types.join(", ");this.props.printer.warn(`Unsupported non-image item in clipboard, only found ${e}.`);continue}const n=c(t),i=await r.getType(n);e.push(i)}if(!e.length)return void this.props.printer.warn("No images in clipboard, nothing to upload.");this.props.triggerUploads(e,"pasted")}catch(e){this.props.printer.error(e)}};dropClick=()=>{this.refPickFiles.current?.click()};render(){const e=e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")};let t,r,n;switch((0,i.vJ)((()=>{const e=e=>this.onPasteDocument(e);return document.addEventListener("paste",e),()=>document.removeEventListener("paste",e)}),[]),(0,i.vJ)((()=>{(async function(){try{if("denied"===(await navigator.permissions.query({name:"clipboard-read"})).state)return"denied"}catch{}if(!navigator?.clipboard?.read)return"unavailable"})().then((e=>this.setState({clipboard:e}))).catch(console.warn)}),[]),this.state.clipboard){case"unavailable":t=(0,s.FD)(s.FK,{children:[(0,s.Y)(a(),{})," unsupported"]}),r="modern paste API is apparently unsupported by your browser",n="home--upload_paste--disabled";break;case"denied":t=(0,s.FD)(s.FK,{children:[(0,s.Y)(a(),{})," denied"]}),r="paste permissions have been revoked, you must manually edit 'site settings' to re-enable",n="home--upload_paste--disabled";break;default:t=(0,s.Y)(s.FK,{children:"paste"}),r="pull image(s) directly from the clipboard",n=""}return(0,s.FD)("div",{class:"container-fluid",children:[(0,s.Y)("div",{class:"row",children:(0,s.Y)("div",{class:"col home--upload_drop",onDrop:this.onDrop,onDragEnter:e,onDragOver:e,onClick:this.dropClick,children:(0,s.Y)("span",{children:"drop, click, tap, or paste"})})}),(0,s.FD)("div",{class:"row",children:[(0,s.Y)("div",{class:"col-9 home--upload_pick",children:(0,s.Y)("input",{class:"form-control",type:"file",ref:this.refPickFiles,multiple:!0,accept:"image/*",onInput:this.onFilePicker})}),(0,s.Y)("div",{class:"col-3 home--upload_paste",children:(0,s.Y)("button",{class:"btn btn-secondary home--upload_button "+n,onClick:this.onPasteButtonClick,title:r,children:t})})]})]})}}function c(e){for(const t of["image/webp","image/jpeg","image/png","image/gif"])if(e.includes(t))return t;return e[0]}},8:(e,t,r)=>{r.d(t,{SC:()=>n,h8:()=>o});const n=async e=>{const t=e.slice(0,32,"application/octet-stream"),r=new Uint8Array(await t.arrayBuffer());return i(r,[255,216,255])?"image/jpeg":i(r,[82,73,70,70])&&i(r.slice(8),[87,69,66,80])?"image/webp":i(r.slice(4),[102,116,121,112,104,101,105,99])||i(r.slice(16),[104,101,105,99])||i(r.slice(16),[109,105,102,49,104,101,105,99])?"image/heic":i(r,[137,80,78,71,13,10,26,10])?"image/png":i(r,[71,73,70,56])?"image/gif":void console.log("unknown image format",(n=[...r],n.map((e=>e.toString(16).padStart(2,"0"))).join(" ")));var n},i=(e,t)=>{for(let r=0;r<t.length;++r)if(e[r]!==t[r])return!1;return!0},o=async(e,t)=>{const r=new OffscreenCanvas(e.width,e.height);try{const n=r.getContext("2d");if(!n)throw new Error("OffscreenCanvas does not support 2d context");return n.drawImage(e,0,0),await r.convertToBlob({type:"image/webp",quality:t})}finally{r.width=0,r.height=0}}},354:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z"}))}},525:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}))}},269:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2,4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}))}},722:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}))}},300:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}))}},748:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z"}))}},674:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"}))}},810:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M11 6C13.76 6 16 8.24 16 11S13.76 16 11 16 6 13.76 6 11 8.24 6 11 6M11 1L13.39 4.42C12.65 4.15 11.84 4 11 4S9.35 4.15 8.61 4.42L11 1M2.34 6L6.5 5.65C5.9 6.16 5.36 6.78 4.94 7.5C4.5 8.24 4.25 9 4.11 9.79L2.34 6M2.36 16L4.12 12.23C4.26 13 4.53 13.78 4.95 14.5C5.37 15.24 5.91 15.86 6.5 16.37L2.36 16M19.65 6L17.88 9.79C17.74 9 17.47 8.23 17.05 7.5C16.63 6.78 16.1 6.15 15.5 5.64L19.65 6M23 13H21C21 15.05 20.22 17.1 18.66 18.66C17.09 20.23 15.05 21 13 21V23C15.56 23 18.12 22 20.07 20.07S23 15.56 23 13M19 13H17C17 14 16.61 15.05 15.83 15.83C15.05 16.61 14 17 13 17V19C14.54 19 16.08 18.41 17.25 17.24C18.41 16.08 19 14.54 19 13"}))}},227:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M7.5,2C5.71,3.15 4.5,5.18 4.5,7.5C4.5,9.82 5.71,11.85 7.53,13C4.46,13 2,10.54 2,7.5A5.5,5.5 0 0,1 7.5,2M19.07,3.5L20.5,4.93L4.93,20.5L3.5,19.07L19.07,3.5M12.89,5.93L11.41,5L9.97,6L10.39,4.3L9,3.24L10.75,3.12L11.33,1.47L12,3.1L13.73,3.13L12.38,4.26L12.89,5.93M9.59,9.54L8.43,8.81L7.31,9.59L7.65,8.27L6.56,7.44L7.92,7.35L8.37,6.06L8.88,7.33L10.24,7.36L9.19,8.23L9.59,9.54M19,13.5A5.5,5.5 0 0,1 13.5,19C12.28,19 11.15,18.6 10.24,17.93L17.93,10.24C18.6,11.15 19,12.28 19,13.5M14.6,20.08L17.37,18.93L17.13,22.28L14.6,20.08M18.93,17.38L20.08,14.61L22.28,17.15L18.93,17.38M20.08,12.42L18.94,9.64L22.28,9.88L20.08,12.42M9.63,18.93L12.4,20.08L9.87,22.27L9.63,18.93Z"}))}},896:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z"}))}},410:(e,t,r)=>{var n=r(172),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};e.exports=function(e){var t=e.color,r=void 0===t?"currentColor":t,o=e.size,a=void 0===o?24:o,s=(e.children,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["color","size","children"])),l="mdi-icon "+(s.class||s.className||"");return n.h("svg",i({},s,{class:l,width:a,height:a,fill:r,viewBox:"0 0 24 24"}),n.h("path",{d:"M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"}))}},720:e=>{e.exports=function(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}},707:(e,t,r)=>{var n=r(356);e.exports=function(e){return"number"==typeof e&&Math.abs(e)<=n}},112:e=>{var t=/(hundred|thousand|(m|b|tr|quadr)illion)$/,r=/teen$/,n=/y$/,i=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,o={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function a(e,t){return o[t]}e.exports=function(e){return t.test(e)||r.test(e)?e+"th":n.test(e)?e.replace(n,"ieth"):i.test(e)?e.replace(i,a):e}},356:e=>{e.exports=9007199254740991},733:(e,t,r)=>{var n=r(112),i=r(720),o=r(707),a=1e3,s=1e6,l=1e9,c=1e12,u=1e15,d=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],h=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function p(e){var t,r,n=arguments[1];return 0===e?n?n.join(" ").replace(/,$/,""):"zero":(n||(n=[]),e<0&&(n.push("minus"),e=Math.abs(e)),e<20?(t=0,r=d[e]):e<100?(t=e%10,r=h[Math.floor(e/10)],t&&(r+="-"+d[t],t=0)):e<a?(t=e%100,r=p(Math.floor(e/100))+" hundred"):e<s?(t=e%a,r=p(Math.floor(e/a))+" thousand,"):e<l?(t=e%s,r=p(Math.floor(e/s))+" million,"):e<c?(t=e%l,r=p(Math.floor(e/l))+" billion,"):e<u?(t=e%c,r=p(Math.floor(e/c))+" trillion,"):e<=9007199254740992&&(t=e%u,r=p(Math.floor(e/u))+" quadrillion,"),n.push(r),p(t,n))}e.exports=function(e,t){var r,a=parseInt(e,10);if(!i(a))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!o(a))throw new RangeError("Input is not a safe number, it’s either too large or too small.");return r=p(a),t?n(r):r}},172:(e,t,r)=>{r.r(t),r.d(t,{Component:()=>x,Fragment:()=>L,cloneElement:()=>W,createContext:()=>G,createElement:()=>w,createRef:()=>C,h:()=>w,hydrate:()=>R,isValidElement:()=>a,options:()=>i,render:()=>J,toChildArray:()=>Y});var n,i,o,a,s,l,c,u,d,h,p,_,f={},v=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function y(e,t){for(var r in t)e[r]=t[r];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function w(e,t,r){var i,o,a,s={};for(a in t)"key"==a?i=t[a]:"ref"==a?o=t[a]:s[a]=t[a];if(arguments.length>2&&(s.children=arguments.length>3?n.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return k(e,s,i,o,null)}function k(e,t,r,n,a){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==a?++o:a,__i:-1,__u:0};return null==a&&null!=i.vnode&&i.vnode(s),s}function C(){return{current:null}}function L(e){return e.children}function x(e,t){this.props=e,this.context=t}function O(e,t){if(null==t)return e.__?O(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?O(e):null}function S(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return S(e)}}function N(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!A.__r++||l!==i.debounceRendering)&&((l=i.debounceRendering)||c)(A)}function A(){var e,t,r,n,o,a,l,c;for(s.sort(u);e=s.shift();)e.__d&&(t=s.length,n=void 0,a=(o=(r=e).__v).__e,l=[],c=[],r.__P&&((n=y({},o)).__v=o.__v+1,i.vnode&&i.vnode(n),z(r.__P,n,o,r.__n,r.__P.namespaceURI,32&o.__u?[a]:null,l,null==a?O(o):a,!!(32&o.__u),c),n.__v=o.__v,n.__.__k[n.__i]=n,H(l,n,c),n.__e!=a&&S(n)),s.length>t&&s.sort(u));A.__r=0}function F(e,t,r,n,i,o,a,s,l,c,u){var d,h,p,_,m,g=n&&n.__k||v,y=t.length;for(r.__d=l,P(r,t,g),l=r.__d,d=0;d<y;d++)null!=(p=r.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(h=-1===p.__i?f:g[p.__i]||f,p.__i=d,z(e,p,h,i,o,a,s,l,c,u),_=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&U(h.ref,null,p),u.push(p.ref,p.__c||_,p)),null==m&&null!=_&&(m=_),65536&p.__u||h.__k===p.__k?l=E(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:_&&(l=_.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=l,r.__e=m}function P(e,t,r){var n,i,o,a,s,l=t.length,c=r.length,u=c,d=0;for(e.__k=[],n=0;n<l;n++)a=n+d,null!=(i=e.__k[n]=null==(i=t[n])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?k(null,i,null,null,null):g(i)?k(L,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?k(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,s=M(i,r,a,u),i.__i=s,o=null,-1!==s&&(u--,(o=r[s])&&(o.__u|=131072)),null==o||null===o.__v?(-1==s&&d--,"function"!=typeof i.type&&(i.__u|=65536)):s!==a&&(s==a-1?d=s-a:s==a+1?d++:s>a?u>l-a?d+=s-a:d--:s<a&&d++,s!==n+d&&(i.__u|=65536))):(o=r[a])&&null==o.key&&o.__e&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=O(o)),I(o,o,!1),r[a]=null,u--);if(u)for(n=0;n<c;n++)null!=(o=r[n])&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=O(o)),I(o,o))}function E(e,t,r){var n,i;if("function"==typeof e.type){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=E(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=O(e)),r.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Y(e,t){return t=t||[],null==e||"boolean"==typeof e||(g(e)?e.some((function(e){Y(e,t)})):t.push(e)),t}function M(e,t,r,n){var i=e.key,o=e.type,a=r-1,s=r+1,l=t[r];if(null===l||l&&i==l.key&&o===l.type&&!(131072&l.__u))return r;if(n>(null==l||131072&l.__u?0:1))for(;a>=0||s<t.length;){if(a>=0){if((l=t[a])&&!(131072&l.__u)&&i==l.key&&o===l.type)return a;a--}if(s<t.length){if((l=t[s])&&!(131072&l.__u)&&i==l.key&&o===l.type)return s;s++}}return-1}function D(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||m.test(t)?r:r+"px"}function T(e,t,r,n,i){var o;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||D(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||D(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n?r.u=n.u:(r.u=d,e.addEventListener(t,o?p:h,o)):e.removeEventListener(t,o?p:h,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function j(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=d++;else if(t.t<r.u)return;return r(i.event?i.event(t):t)}}}function z(e,t,r,n,o,a,s,l,c,u){var d,h,p,_,f,v,m,b,w,k,C,O,S,N,A,P,E=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),a=[l=t.__e=r.__e]),(d=i.__b)&&d(t);e:if("function"==typeof E)try{if(b=t.props,w="prototype"in E&&E.prototype.render,k=(d=E.contextType)&&n[d.__c],C=d?k?k.props.value:d.__:n,r.__c?m=(h=t.__c=r.__c).__=h.__E:(w?t.__c=h=new E(b,C):(t.__c=h=new x(b,C),h.constructor=E,h.render=B),k&&k.sub(h),h.props=b,h.state||(h.state={}),h.context=C,h.__n=n,p=h.__d=!0,h.__h=[],h._sb=[]),w&&null==h.__s&&(h.__s=h.state),w&&null!=E.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=y({},h.__s)),y(h.__s,E.getDerivedStateFromProps(b,h.__s))),_=h.props,f=h.state,h.__v=t,p)w&&null==E.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),w&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(w&&null==E.getDerivedStateFromProps&&b!==_&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,C),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,C)||t.__v===r.__v)){for(t.__v!==r.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach((function(e){e&&(e.__=t)})),O=0;O<h._sb.length;O++)h.__h.push(h._sb[O]);h._sb=[],h.__h.length&&s.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,C),w&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(_,f,v)}))}if(h.context=C,h.props=b,h.__P=e,h.__e=!1,S=i.__r,N=0,w){for(h.state=h.__s,h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[]}else do{h.__d=!1,S&&S(t),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++N<25);h.state=h.__s,null!=h.getChildContext&&(n=y(y({},n),h.getChildContext())),w&&!p&&null!=h.getSnapshotBeforeUpdate&&(v=h.getSnapshotBeforeUpdate(_,f)),F(e,g(P=null!=d&&d.type===L&&null==d.key?d.props.children:d)?P:[P],t,r,n,o,a,s,l,c,u),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),m&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=a){for(t.__u|=c?160:32;l&&8===l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,t.__e=l}else t.__e=r.__e,t.__k=r.__k;i.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=$(r.__e,t,r,n,o,a,s,c,u);(d=i.diffed)&&d(t)}function H(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)U(r[n],r[++n],r[++n]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function $(e,t,r,i,o,a,s,l,c){var u,d,h,p,_,v,m,y=r.props,w=t.props,k=t.type;if("svg"===k?o="http://www.w3.org/2000/svg":"math"===k?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=a)for(u=0;u<a.length;u++)if((_=a[u])&&"setAttribute"in _==!!k&&(k?_.localName===k:3===_.nodeType)){e=_,a[u]=null;break}if(null==e){if(null===k)return document.createTextNode(w);e=document.createElementNS(o,k,w.is&&w),a=null,l=!1}if(null===k)y===w||l&&e.data===w||(e.data=w);else{if(a=a&&n.call(e.childNodes),y=r.props||f,!l&&null!=a)for(y={},u=0;u<e.attributes.length;u++)y[(_=e.attributes[u]).name]=_.value;for(u in y)if(_=y[u],"children"==u);else if("dangerouslySetInnerHTML"==u)h=_;else if("key"!==u&&!(u in w)){if("value"==u&&"defaultValue"in w||"checked"==u&&"defaultChecked"in w)continue;T(e,u,null,_,o)}for(u in w)_=w[u],"children"==u?p=_:"dangerouslySetInnerHTML"==u?d=_:"value"==u?v=_:"checked"==u?m=_:"key"===u||l&&"function"!=typeof _||y[u]===_||T(e,u,_,y[u],o);if(d)l||h&&(d.__html===h.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(h&&(e.innerHTML=""),F(e,g(p)?p:[p],t,r,i,"foreignObject"===k?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&O(r,0),l,c),null!=a)for(u=a.length;u--;)null!=a[u]&&b(a[u]);l||(u="value",void 0!==v&&(v!==e[u]||"progress"===k&&!v||"option"===k&&v!==y[u])&&T(e,u,v,y[u],o),u="checked",void 0!==m&&m!==e[u]&&T(e,u,m,y[u],o))}return e}function U(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,r)}}function I(e,t,r){var n,o;if(i.unmount&&i.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||U(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){i.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&I(n[o],t,r||"function"!=typeof e.type);r||null==e.__e||b(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function B(e,t,r){return this.constructor(e,r)}function J(e,t,r){var o,a,s,l;i.__&&i.__(e,t),a=(o="function"==typeof r)?null:r&&r.__k||t.__k,s=[],l=[],z(t,e=(!o&&r||t).__k=w(L,null,[e]),a||f,f,t.namespaceURI,!o&&r?[r]:a?null:t.firstChild?n.call(t.childNodes):null,s,!o&&r?r:a?a.__e:t.firstChild,o,l),H(s,e,l)}function R(e,t){J(e,t,R)}function W(e,t,r){var i,o,a,s,l=y({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==a?i=t[a]:"ref"==a?o=t[a]:l[a]=void 0===t[a]&&void 0!==s?s[a]:t[a];return arguments.length>2&&(l.children=arguments.length>3?n.call(arguments,2):r),k(e.type,l,i||e.key,o||e.ref,null)}function G(e,t){var r={__c:t="__cC"+_++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n;return this.getChildContext||(r=[],(n={})[t]=this,this.getChildContext=function(){return n},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some((function(e){e.__e=!0,N(e)}))},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r&&r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}n=v.slice,i={__e:function(e,t,r,n){for(var i,o,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},o=0,a=function(e){return null!=e&&null==e.constructor},x.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=y({},this.state),"function"==typeof e&&(e=e(y({},r),this.props)),e&&y(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),N(this))},x.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),N(this))},x.prototype.render=L,s=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,d=0,h=j(!1),p=j(!0),_=0},994:(e,t,r)=>{r.d(t,{J0:()=>g,NT:()=>b,vJ:()=>y});var n,i,o,a,s=r(172),l=0,c=[],u=s.options,d=u.__b,h=u.__r,p=u.diffed,_=u.__c,f=u.unmount,v=u.__;function m(e,t){u.__h&&u.__h(i,e,l||t),l=0;var r=i.__H||(i.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function g(e){return l=1,function(e,t){var r=m(n++,2);if(r.t=e,!r.__c&&(r.__=[O(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=i,!i.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return!!e.__c}));if(i.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&r.__c.props===e)&&(!a||a.call(this,e,t,n))};i.u=!0;var a=i.shouldComponentUpdate,s=i.componentWillUpdate;i.componentWillUpdate=function(e,t,r){if(this.__e){var n=a;a=void 0,o(e,t,r),a=n}s&&s.call(this,e,t,r)},i.shouldComponentUpdate=o}return r.__N||r.__}(O,e)}function y(e,t){var r=m(n++,3);!u.__s&&function(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}(r.__H,t)&&(r.__=e,r.i=t,i.__H.__h.push(r))}function b(e){var t=i.context[e.__c],r=m(n++,9);return r.c=e,t?(null==r.__&&(r.__=!0,t.sub(i)),t.props.value):e.__}function w(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(L),e.__H.__h.forEach(x),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){i=null,d&&d(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),v&&v(e,t)},u.__r=function(e){h&&h(e),n=0;var t=(i=e.__c).__H;t&&(o===i?(t.__h=[],i.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(L),t.__h.forEach(x),t.__h=[],n=0)),o=i},u.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&a===u.requestAnimationFrame||((a=u.requestAnimationFrame)||C)(w)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),o=i=null},u.__c=function(e,t){t.some((function(e){try{e.__h.forEach(L),e.__h=e.__h.filter((function(e){return!e.__||x(e)}))}catch(r){t.some((function(e){e.__h&&(e.__h=[])})),t=[],u.__e(r,e.__v)}})),_&&_(e,t)},u.unmount=function(e){f&&f(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach((function(e){try{L(e)}catch(e){t=e}})),r.__H=void 0,t&&u.__e(t,r.__v))};var k="function"==typeof requestAnimationFrame;function C(e){var t,r=function(){clearTimeout(n),k&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);k&&(t=requestAnimationFrame(r))}function L(e){var t=i,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),i=t}function x(e){var t=i;e.__c=e.__(),i=t}function O(e,t){return"function"==typeof t?t(e):t}},201:(e,t,r)=>{r.d(t,{FD:()=>o,FK:()=>n.Fragment,Y:()=>o});var n=r(172),i=0;function o(e,t,r,o,a,s){t||(t={});var l,c,u=t;if("ref"in u)for(c in u={},t)"ref"==c?l=t[c]:u[c]=t[c];var d={type:e,props:u,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--i,__i:-1,__u:0,__source:a,__self:s};if("function"==typeof e&&(l=e.defaultProps))for(c in l)void 0===u[c]&&(u[c]=l[c]);return n.options.vnode&&n.options.vnode(d),d}Array.isArray},245:(e,t,r)=>{r.d(t,{P5:()=>l});const n=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map((e=>[e.name,e])),i=new Map(n);Error;const o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],a=new WeakSet,s=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:l,depth:u,useToJSON:d,serialize:h})=>{var p;if(r||(r=Array.isArray(e)?[]:!h&&c(e)?new(p=e.name,i.get(p)??Error):{}),t.push(e),u>=l)return r;if(d&&"function"==typeof e.toJSON&&!a.has(e))return(e=>{a.add(e);const t=e.toJSON();return a.delete(e),t})(e);const _=e=>s({from:e,seen:[...t],forceEnumerable:n,maxDepth:l,depth:u,useToJSON:d,serialize:h});for(const[n,i]of Object.entries(e))if(i&&i instanceof Uint8Array&&"Buffer"===i.constructor.name)r[n]="[object Buffer]";else if(null===i||"object"!=typeof i||"function"!=typeof i.pipe){if("function"!=typeof i)if(i&&"object"==typeof i)t.includes(e[n])?r[n]="[Circular]":(u++,r[n]=_(e[n]));else try{r[n]=i}catch{}}else r[n]="[object Stream]";for(const{property:t,enumerable:i}of o)void 0!==e[t]&&null!==e[t]&&Object.defineProperty(r,t,{value:c(e[t])?_(e[t]):e[t],enumerable:!!n||i,configurable:!0,writable:!0});return r};function l(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return"object"==typeof e&&null!==e?s({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}function c(e){return Boolean(e)&&"object"==typeof e&&"name"in e&&"message"in e&&"stack"in e}}},d={};function h(e){var t=d[e];if(void 0!==t)return t.exports;var r=d[e]={id:e,exports:{}};return u[e](r,r.exports,h),r.exports}h.m=u,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},h.a=(i,o,a)=>{var s;a&&((s=[]).d=-1);var l,c,u,d=new Set,h=i.exports,p=new Promise(((e,t)=>{u=t,c=e}));p[t]=h,p[e]=e=>(s&&e(s),d.forEach(e),p.catch((e=>{}))),i.exports=p,o((i=>{var o;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var o=[];o.d=0,i.then((e=>{a[t]=e,n(o)}),(e=>{a[r]=e,n(o)}));var a={};return a[e]=e=>e(o),a}}var s={};return s[e]=e=>{},s[t]=i,s})))(i);var a=()=>l.map((e=>{if(e[r])throw e[r];return e[t]})),c=new Promise((t=>{(o=()=>t(a)).r=0;var r=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(o.r++,e.push(o)));l.map((t=>t[e](r)))}));return o.r?c:a()}),(e=>(e?u(p[r]=e):c(h),n(s)))),s&&s.d<0&&(s.d=0)},h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},h.d=(e,t)=>{for(var r in t)h.o(t,r)&&!h.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},h.f={},h.e=e=>Promise.all(Object.keys(h.f).reduce(((t,r)=>(h.f[r](e,t),t)),[])),h.k=e=>"static/bundle.undefined.css",h.u=e=>"static/bundle.10030ac7dcb1f175.js",h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),h.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},o="app:",h.l=(e,t,r,n)=>{if(i[e])i[e].push(t);else{var a,s;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+r){a=u;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,h.nc&&a.setAttribute("nonce",h.nc),a.setAttribute("data-webpack",o+r),a.src=e),i[e]=[t];var d=(t,r)=>{a.onerror=a.onload=null,clearTimeout(p);var n=i[e];if(delete i[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}},h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.v=(e,t,r,n)=>{var i=fetch(h.p+"static/"+r+".module.wasm"),o=()=>i.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,n))).then((t=>Object.assign(e,t.instance.exports)));return i.then((t=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,n).then((t=>Object.assign(e,t.instance.exports)),(e=>{if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),o();throw e})):o()))},(()=>{var e;h.g.importScripts&&(e=h.g.location+"");var t=h.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),h.p=e+"../"})(),a={},s=(e,t,r)=>{var n,i,o="",s="",l={},u="--webpack-app-"+r,d=1;try{t||(t=c(r));for(var p=t.sheet.cssRules||t.sheet.rules,_=p.length-1;_>-1&&!n;){var f=p[_--].style;f&&(n=f.getPropertyValue(u))}}catch(e){}if(n||(n=getComputedStyle(document.head).getPropertyValue(u)),!n)return[];var v,m={},g=n[0],y=g,b=g,w=256;for(i=1;i<n.length;i++)b+=v=(d=n[i].charCodeAt(0))<256?n[i]:m[d]?m[d]:y+g,g=v.charAt(0),m[w]=y+g,++w>65535&&(w=256,m={}),y=v;for(n=b,i=0;d;i++)58==(d=n.charCodeAt(i))?(s=o,o=""):47==d?(o=o.replace(/^_/,""),l[s=s.replace(/^_/,"")]=o,o="",s=""):38==d?h.r(l):d&&44!=d?o+=92==d?n[++i]:n[i]:(e[o=o.replace(/^_/,"")]=((e,t)=>{t.exports=e}).bind(null,l),o="",s="",l={});a[r]=0},l="data-webpack-loading",c=(e,t,r)=>{for(var n,i,o="chunk-"+e,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s];if("stylesheet"==c.rel&&(c.href==t||c.getAttribute("href")==t||c.getAttribute("data-webpack")=="app:"+o)){n=c;break}}if(!r)return n;n||(i=!0,n=document.createElement("link"),h.nc&&n.setAttribute("nonce",h.nc),n.setAttribute("data-webpack","app:"+o),n.setAttribute(l,1),n.rel="stylesheet",n.href=t);var u=(e,t)=>{if(n.onerror=n.onload=null,n.removeAttribute(l),clearTimeout(d),t&&"load"!=t.type&&n.parentNode.removeChild(n),r(t),e)return e(t)};if(n.getAttribute(l)){var d=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload)}else u(void 0,{type:"load",target:n});return i&&document.head.appendChild(n),n},s(h.m,0,792),h.f.css=(e,t)=>{var r=h.o(a,e)?a[e]:void 0;if(0!==r)if(r)t.push(r[2]);else if(792==e){var n=new Promise(((t,n)=>r=a[e]=[t,n]));t.push(r[2]=n);var i=h.p+h.k(e),o=new Error,l=c(e,i,(t=>{if(h.o(a,e)&&(0!==(r=a[e])&&(a[e]=void 0),r))if("load"!==t.type){var n=t&&t.type,i=t&&t.target&&t.target.href;o.message="Loading css chunk "+e+" failed.\n("+n+": "+i+")",o.name="ChunkLoadError",o.type=n,o.request=i,r[1](o)}else s(h.m,l,e),r[0]()}))}else a[e]=0},(()=>{var e={792:0};h.f.j=(t,r)=>{var n=h.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var o=h.p+h.u(t),a=new Error;h.l(o,(r=>{if(h.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[o,a,s]=r,l=0;if(o.some((t=>0!==e[t]))){for(n in a)h.o(a,n)&&(h.m[n]=a[n]);s&&s(h)}for(t&&t(r);l<o.length;l++)i=o[l],h.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var p={};h.r(p),h.d(p,{init:()=>ae}),h(878);var _=h(172),f=h(245),v=h(994);const m=(0,_.createContext)(new Map);function g(e,t){const r=(0,v.NT)(m),[n,i]=(0,v.J0)(o);function o(){const e=a(),t={status:e.status,data:e.data,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,setData:l,refetch:c};return"error"===t.status&&(t.error=e.error),t}function a(){return r.has(e)||r.set(e,{subscribers:[]}),r.get(e)}function s(e){const t=a();for(const r in e)t[r]=e[r];const r=o();t.subscribers.forEach((e=>{e(r)}))}function l(e){s({status:"success",data:e})}function c(){null!=e&&(s({status:"loading"}),Promise.resolve(t()).then(l).catch((e=>{s({status:"error",error:e})})))}return(0,v.vJ)((()=>{const{status:t,subscribers:n}=a();return n.push(i),"loading"!==t&&c(),()=>{n.splice(n.indexOf(i),1),n.length||r.delete(e)}}),[e]),n}async function y(e,t){return fetch("/api/gallery",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{type:"gallery",attributes:{gallery:e,images:t}}})})}async function b(e,t){const r=await y(e,t);if(!r.ok)throw new Error(`failed to call gallery: ${r.status}`);const n=await r.json();if(!n?.data)throw new Error(`missing data in response: ${JSON.stringify(n)}`);return n.data}var w=h(525),k=h.n(w),C=h(269),L=h.n(C),x=h(201);class O extends _.Component{render(e){return(0,x.Y)("ul",{class:"thumb--frame",children:e.items.map((t=>"done"===t.state?(0,x.Y)(S,{bare:t.base,picking:e.picking?.v?e.picking.v[t.base]??!1:void 0,setPicked:r=>{e.picking?.set({...e.picking.v,[t.base]:r})}}):(0,x.Y)(N,{item:t})))})}}class S extends _.Component{doCopy=async()=>{try{const{bare:e}=this.props,t=new URL(e,document.location.href);await navigator.clipboard.writeText(t.href),this.setState({copied:!0})}catch(e){alert("Failed to copy to clipboard: "+e)}};clearCopy=()=>{this.setState({copied:!1})};render(e,t){const r=e.bare;let n;if(void 0===e.picking)n=(0,x.Y)("button",{className:"btn btn-"+(t.copied?"success":"secondary"),onClick:this.doCopy,onMouseLeave:this.clearCopy,children:t.copied?"copied!":"copy"});else{const t=e.picking,r=t?(0,x.FD)(x.FK,{children:[(0,x.Y)(L(),{})," selected"]}):(0,x.FD)(x.FK,{children:[(0,x.Y)(k(),{})," select"]});n=(0,x.Y)("button",{className:"btn btn-"+(t?"success":"secondary"),onClick:()=>e.setPicked?.(!t),children:r})}return(0,x.FD)("li",{children:[(0,x.Y)("a",{href:r,target:"_blank",class:"thumb--frame-imgbox",children:(0,x.Y)("img",{src:`${r}.thumb.jpg`,loading:"lazy"})}),n]})}}class N extends _.Component{render(e){const t=e.item;if("done"===t.state)throw new Error("ThumbUpload should not be used for done items");const r=e=>(0,x.FD)("div",{class:"thumb--frame-imgbox thumb--frame-message",children:[(0,x.Y)("img",{src:URL.createObjectURL(t.file),alt:t.file.name?`preview of ${t.file.name}`:"preview"}),(0,x.FD)("span",{children:[t.ctx,(0,x.Y)("br",{}),t.file.name,(0,x.Y)("br",{}),e]})]});if("error"===t.state)return(0,x.FD)("li",{children:[r(`error: ${t.error}`),(0,x.Y)("div",{class:"embarrassment",children:" "})]});const n=A(t);if(n)return(0,x.FD)("li",{children:[r(n),(0,x.Y)("div",{class:"embarrassment",children:" "})]});if("uploading"!==t.state||Number.isNaN(t.progress))throw new Error(`unreachable state ${t.state}`);const i=Math.round(100*t.progress);return(0,x.FD)("li",{children:[r(`transferring: ${i}% complete`),(0,x.Y)("div",{className:"progress",role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,children:(0,x.Y)("div",{className:"progress-bar",style:`width: ${i}%`})})]})}}const A=e=>{switch(e.state){case"queued":return"queued";case"resizing":return"resizing";case"ready":return"ready";case"starting":return"starting";case"uploading":if(Number.isNaN(e.progress))return"transferring (progress not available)";if(100===Math.round(100*e.progress))return"upload complete, waiting for server"}};class F extends _.Component{render(e,t){(0,v.vJ)((()=>{const e=()=>{this.setState({hash:window.location.hash.slice(1).split("/").map((e=>decodeURIComponent(e)))})};return window.addEventListener("hashchange",e),e(),()=>window.removeEventListener("hashchange",e)}),[]);const r=t.hash?.[0];if(!r||!r.includes(":"))return(0,x.Y)("div",{class:"alert alert-warn",children:"no valid gallery specified"});const{status:n,error:i,data:o}=g(`gallery-${r}-data`,(async()=>async function(e){const t=await fetch(`/api/gallery/${e}`),r=await t.json();if(!r?.data)throw new Error(`missing data in response: ${JSON.stringify(r)}`);return r.data}(r)));return"loading"===n?(0,x.Y)("div",{children:"fetching gallery details..."}):"error"===n?(0,x.FD)("div",{class:"alert alert-error",children:["loading failed: ",i?.message]}):"success"===n&&Array.isArray(o)?(0,x.FD)("div",{class:"container-fluid",children:[(0,x.Y)("div",{class:"row gallery--header",children:(0,x.FD)("div",{class:"col",children:["Gallery: ",(0,x.Y)("a",{href:`/gallery/#${r}`,children:r}),(0,x.Y)("span",{className:"home--sign_in-divider",children:"|"}),(0,x.Y)("a",{href:"/",children:"back to home"})]})}),(0,x.Y)("div",{class:"row",children:(0,x.FD)("div",{class:"col",children:[(0,x.Y)(O,{items:o.map((e=>{let{id:t}=e;return{state:"done",base:`../${t}`,ctx:"gallery"}}))}),(0,x.Y)("div",{class:"util--clear"})]})})]}):(0,x.Y)("div",{class:"alert alert-error",children:"loading failed: invalid data"})}}var P=h(937),E=h(733),Y=h.n(E),M=h(674),D=h.n(M),T=h(810),j=h.n(T),z=h(227),H=h.n(z),$=h(896),U=h.n($),I=h(410),B=h.n(I);const J=e=>/^([a-zA-Z][a-zA-Z0-9]{3,9})!(.{4,99})$/.test(e);var R=h(354),W=h.n(R),G=h(722),V=h.n(G);class q extends _.Component{render(e,t){const r=J(t.newGallery??""),n=[["starts with an ascii letter",/^[a-z]/i],["contains a !",/!/],["tag is 4-10 ascii alphanumerics",/^[a-z0-9]{4,10}!/],["secret is 4-99 characters",/!.{4,99}$/],["matches the mystery regex",J]],i=()=>{J(this.state.newGallery??"")&&this.props.accept(this.state.newGallery)},o=(0,x.FD)(x.FK,{children:[(0,x.FD)("label",{children:[e.label,(0,x.Y)("input",{type:"text",className:"form-control is-"+(r?"valid":"invalid"),placeholder:e.placeholder??"horse!battery staple",onInput:e=>{this.setState({newGallery:e.target?.value})},onKeyDown:t=>{switch(t.key){case"Enter":i();break;case"Escape":e.cancel()}},value:t.newGallery??""})]}),(0,x.Y)("button",{className:"btn btn-primary",disabled:!(r&&e.enabled),onClick:i,children:e.submitName}),(0,x.Y)("button",{className:"btn btn-secondary",onClick:e.cancel,children:"cancel"})]}),a=(0,x.Y)("ul",{class:"home--sign_in-validation",children:n.map((e=>{let[r,n]=e;const i=t.newGallery??"",o="test"in n?n.test(i):n(i);return(0,x.FD)("li",{class:o?"text-success":"text-danger",children:[o?(0,x.Y)(W(),{}):(0,x.Y)(V(),{})," ",r]})}))});return(0,x.FD)(x.FK,{children:[o,t.newGallery&&a]})}}class K extends _.Component{doneConfiguring=()=>{this.props.picking.set(!1),this.setState({configuring:!1})};render(e,t){if(t.configuring){const t=(0,x.Y)(q,{label:(0,x.FD)(x.FK,{children:["new backup gallery, in ",(0,x.Y)("i",{children:"public-name!secret passphrase"})," format"]}),submitName:"sync",accept:e=>{this.props.gallery.set(e),this.doneConfiguring()},enabled:!0,cancel:this.doneConfiguring}),r=(0,x.FD)("div",{class:"btn-group home--sign_in-theme",children:[(0,x.FD)("button",{type:"button",class:"btn btn-secondary"+(e.theme.v?"":" active"),onClick:()=>e.theme.set(void 0),children:[(0,x.Y)(H(),{})," Auto"]}),(0,x.FD)("button",{type:"button",className:"btn btn-secondary"+("dark"===e.theme.v?" active":" "),onClick:()=>e.theme.set("dark"),children:[(0,x.Y)(B(),{})," Dark"]}),(0,x.FD)("button",{type:"button",className:"btn btn-secondary"+("light"===e.theme.v?" active":""),onClick:()=>e.theme.set("light"),children:[(0,x.Y)(j(),{})," Light"]})]});let n;if(e.picking.v){let t;const r=e.currentlyPicked??0;switch(r){case 0:t=(0,x.Y)(x.FK,{children:"no selected images"});break;case 1:t=(0,x.Y)(x.FK,{children:"one selected image"});break;default:t=(0,x.FD)(x.FK,{children:[Y()(r)," selected images"]})}n=(0,x.FD)("div",{children:[(0,x.Y)(q,{accept:()=>{},cancel:()=>{e.picking.set(!1)},label:(0,x.FD)(x.FK,{children:["add ",t," to a gallery"]}),submitName:"(wip) add",enabled:!1,placeholder:"husband!valley forge"}),(0,x.FD)("button",{className:"btn btn-danger",disabled:!0,children:[(0,x.Y)(U(),{})," (wip) remove ",t," from local storage"]})]})}const i=(0,x.FD)("div",{children:[(0,x.FD)("div",{className:"form-check form-switch form-check-inline",children:[(0,x.Y)("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"signin-pickety",checked:e.picking.v,onChange:t=>{e.picking.set(t.currentTarget.checked)}}),(0,x.Y)("label",{className:"form-check-label",htmlFor:"signin-pickety",children:"pick images to add to gallery, or clean-up"})]}),n]});return(0,x.Y)("div",{className:"row home--sign_in home--sign_in-info",children:(0,x.FD)("div",{className:"col",children:[t,(0,x.Y)("hr",{}),r,(0,x.Y)("hr",{}),i,(0,x.Y)("hr",{})]})})}const r=(0,x.FD)("span",{children:[(0,x.Y)("span",{className:"home--sign_in-divider",children:"|"}),(0,x.FD)("button",{className:"btn btn-secondary",onClick:()=>this.setState({configuring:!0}),children:[(0,x.Y)(D(),{})," configure"]})]}),n=e.gallery.v;if(n){const{data:t,isLoading:i,isError:o}=g(`gallery-${n}-id`,(async()=>{const e=await y(n,[]);if(400===e.status)return{valid:!1};if(!e.ok)throw new Error(`unexpected response: ${e.status}`);const t=await e.json();return{valid:!0,id:t?.data?.id}})),a=t?.id;let s;return s=i?(0,x.Y)("span",{children:"backups configured, fetching gallery name"}):o?(0,x.Y)("span",{children:"backups configured, but we're offline(?)"}):t?.valid?(0,x.FD)("span",{children:["backing up to ",(0,x.Y)("a",{href:`/gallery/#${a}`,children:a})]}):(0,x.Y)("span",{children:"backups configured, but invalid"}),(0,x.Y)("div",{className:"row home--sign_in home--sign_in-"+(a?"info":"warn"),children:(0,x.FD)("div",{className:"col",children:[s,e.syncingNewGallery&&" (syncing)",r]})})}return(0,x.Y)("div",{className:"row home--sign_in home--sign_in-warn",children:(0,x.FD)("div",{className:"col",children:["gallery backup: off; stored in this browser only",r]})})}}var Z=h(300),X=h.n(Z);class Q extends _.Component{render(e){if(0!==e.messages.length)return(0,x.Y)("div",{class:"row",children:(0,x.Y)("div",{class:"col",children:e.messages.map(((t,r)=>{let[n,i]=t;return(0,x.FD)("div",{className:`alert alert-${"warn"===n?"warning":"danger"} home--alert`,role:"alert",onClick:()=>e.removeMessage(r),children:[(0,x.Y)(X(),{})," ",i]},`warning-${r}`)}))})})}}var ee=h(8);class te extends _.Component{imRight=(()=>(0,_.createRef)())();state={messages:[],uploads:[],pees:[],configuredGallery:void 0,configuredTheme:void 0,picking:void 0};render(e,t){(0,v.vJ)((()=>this.setState({pees:re("quadpees",[])})),[]),(0,v.vJ)((()=>{Array.isArray(t.pees)&&t.pees.length>0&&localStorage.setItem("quadpees",JSON.stringify(t.pees))}),[t.pees]),(0,v.vJ)((()=>{this.setState({configuredGallery:localStorage.getItem("gallery")??void 0})}),[]),(0,v.vJ)((()=>{t.configuredGallery?.includes("!")?localStorage.setItem("gallery",t.configuredGallery):localStorage.removeItem("gallery")}),[t.configuredGallery]);const r=()=>{document.body.setAttribute("data-bs-theme",this.state.configuredTheme??(function(){try{return window.matchMedia("(prefers-color-scheme: light)")?.matches}catch{return!1}}()?"light":"dark"))};(0,v.vJ)((()=>{const e=localStorage.getItem("theme");this.setState({configuredTheme:e});const t=window.matchMedia("(prefers-color-scheme: light)"),n=()=>r();return t?.addEventListener("change",n),()=>t?.removeEventListener("change",n)}),[]),(0,v.vJ)((()=>{r(),t.configuredTheme?localStorage.setItem("theme",t.configuredTheme):localStorage.removeItem("theme")}),[t.configuredTheme]);const n=()=>{this.setState({imRightWidth:this.imRight.current?.getBoundingClientRect()?.width})};(0,v.vJ)((()=>(window.addEventListener("resize",n),setTimeout(n,0),()=>window.removeEventListener("resize",n))),[]);const i=[...t.uploads.filter((e=>"done"!==e.state)).map((e=>e)).reverse(),...t.pees.map((e=>({base:e,state:"done",ctx:"local-storage"}))).reverse()],o=Math.floor((t.imRightWidth??330)/330),a=i.slice(0,o),s=i.slice(o),l={v:t.picking,set:e=>{this.setState({picking:e})}};return(0,x.FD)("div",{class:"container-fluid",children:[(0,x.Y)(K,{gallery:{v:t.configuredGallery,set:async e=>{if(this.setState({configuredGallery:e}),e){this.setState({configuredGallery:e,syncingNewGallery:!0});try{await b(e,t.pees)}catch(e){this.printer.error(e)}this.setState({syncingNewGallery:!1})}}},theme:{v:t.configuredTheme,set:e=>this.setState({configuredTheme:e})},picking:{v:void 0!==t.picking,set:e=>this.setState({picking:e?{}:void 0})},currentlyPicked:Object.values(t.picking??{}).filter(Boolean).length,syncingNewGallery:t.syncingNewGallery}),(0,x.Y)(Q,{messages:t.messages,removeMessage:e=>{this.setState((t=>{let{messages:r}=t;const n=[...r];return n.splice(e,1),{messages:n}}))}}),(0,x.FD)("div",{class:"row",children:[(0,x.Y)("div",{class:"col-md",children:(0,x.Y)(P._,{printer:this.printer,triggerUploads:(e,t)=>{const r=e.map((e=>({file:e,ctx:t,state:"queued"})));this.setState((e=>{let{uploads:t}=e;for(let e=0;e<r.length;++e)this.uploadWrapper(t.length+e,r[e]);return{uploads:[...t,...r]}}))}})}),a.length>0&&(0,x.Y)("div",{class:"col-md",ref:this.imRight,children:(0,x.Y)(O,{items:a,picking:l})})]}),s.length>0&&(0,x.Y)("div",{class:"row",children:(0,x.FD)("div",{className:"col",children:[(0,x.Y)(O,{items:s,picking:l}),(0,x.Y)("div",{className:"util--clear"})]})}),(0,x.Y)("div",{class:"row",children:(0,x.Y)("footer",{children:(0,x.Y)("p",{className:"text-center text-body-secondary",children:(0,x.Y)("a",{href:"/terms/",children:"t&cs"})})})})]})}uploadWrapper=async(e,t)=>{const r=t=>{this.setState((r=>{let{uploads:n}=r;const i=[...n];return i[e]=t,{uploads:i}}))};try{let e=t;if("queued"!==e?.state)throw new Error("should be in starting state");const n=await(0,ee.SC)(e.file);if(e.file.size>1048576||"image/heic"===n?(e={...e,state:"resizing"},r(e),e=await ne(e),r(e)):e={...e,state:"ready",originalSize:void 0},e=await async function(e,t){const r=new FormData;if("ready"!==e.state)throw new Error(`Invalid state: ${e.state}`);r.append("image",e.file,e.file.name),r.append("ctx",e.ctx),r.append("return_json","true");const n=new XMLHttpRequest;n.responseType="json",n.open("POST","/api/upload"),n.upload.addEventListener("progress",(r=>{t({state:"uploading",progress:r.lengthComputable?r.loaded/r.total:NaN,ctx:e.ctx,file:e.file})}));const i=await new Promise((i=>{n.addEventListener("load",(()=>i("load"))),n.addEventListener("abort",(()=>i("error"))),n.addEventListener("error",(()=>i("error"))),n.send(r),t({state:"starting",file:e.file,ctx:e.ctx})}));if(200!==n.status||"load"!==i){let r="unexpected request error: ";return r+="error"===i?"[opaque networking failure]":`${n.status}: ${n.statusText}`,void t({state:"error",error:r,ctx:e.ctx,file:e.file})}const o=n.response.data.id;return{state:"done",ctx:e.ctx,base:o}}(e,r),!e)return;const i=e.base;this.setState((e=>{let{pees:t}=e;return{pees:[...t,i]}})),r(e),this.state.configuredGallery&&await b(this.state.configuredGallery,[i])}catch(e){this.printer.error(e)}};printer=(()=>{return e=e=>this.setState((t=>{let{messages:r}=t;return{messages:[...r,e]}})),{warn:t=>e(["warn",t]),error:t=>{console.error(t),e(["error","Unexpected internal error: "+JSON.stringify((0,f.P5)(t))])}};var e})()}function re(e,t){const r=localStorage.getItem(e);return r?JSON.parse(r):t}const ne=async e=>{if("resizing"!==e.state)throw new Error(`invalid state: ${e.state}`);const t=e.file;await ie();const r=await createImageBitmap(t);let n;try{await ie(),n=await(0,ee.h8)(r,.8),n.size>5242880&&(n=void 0,await ie(),n=await(0,ee.h8)(r,.5)),n.size>9437184&&(n=void 0,await ie(),n=await(0,ee.h8)(r,.2))}finally{r.close()}return await ie(),n.size>.9*t.size&&(n=t),{...e,state:"ready",file:n.size<.9*t.size?n:t,originalSize:t.size}},ie=async()=>oe(15),oe=async e=>new Promise((t=>setTimeout(t,e)));function ae(e,t){e.innerHTML="JS App booting...",(async()=>{switch(await new Promise((e=>setTimeout(e))),e.innerHTML="",t){case"gallery":return(0,_.render)((0,x.Y)(F,{}),e);case"debug":{const{ImageDebug:t}=await h.e(920).then(h.bind(h,920));return(0,_.render)((0,x.Y)(t,{}),e)}default:return(0,_.render)((0,x.Y)(te,{}),e)}})().catch((async t=>{console.error(t),e.innerHTML=`<pre>${JSON.stringify((0,f.P5)(t),null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>`}))}ae(document.getElementById("app"),document.body.getAttribute("data-mode")),app=p})();